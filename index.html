<!DOCTYPE html>
<html>
<head>
    <title>AI Chat (显示完整API响应)</title>
    <style>
        #rawResponse {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap; /* 保持 JSON 格式 */
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>AI 聊天测试</h1>
    <input type="text" id="userInput" placeholder="输入消息..." />
    <button onclick="sendMessage()">发送</button>
    
    <h3>AI 回复：</h3>
    <div id="response"></div>
    
    <h3>完整 API 响应：</h3>
    <pre id="rawResponse">（API 返回的原始数据会显示在这里）</pre>

    <script>
        const API_URL = "https://1cf3-34-125-150-63.ngrok-free.app/"; // 替换成你的 Colab + ngrok URL

        async function sendMessage() {
            const userInput = document.getElementById("userInput").value;
            
            try {
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        prompt: userInput,
                        max_new_tokens: 100
                    })
                });
                
                const data = await response.json();
                
                // 显示 AI 回复
                document.getElementById("response").innerText = data.results[0].text;
                
                // 显示完整的 API 响应（格式化 JSON）
                document.getElementById("rawResponse").innerText = JSON.stringify(data, null, 2);
                
            } catch (error) {
                console.error("请求出错:", error);
                document.getElementById("rawResponse").innerText = "请求失败: " + error.message;
            }
        }
    </script>
</body>
</html>